var D=Object.defineProperty;var H=Object.getOwnPropertyDescriptor;var g=(r,t,e,n)=>{for(var o=n>1?void 0:n?H(t,e):t,i=r.length-1,s;i>=0;i--)(s=r[i])&&(o=(n?s(t,e,o):s(o))||o);return n&&o&&D(t,e,o),o};function h(r,t){switch(t.name){case"Object":case"Array":return JSON.stringify(r);default:return String(r)}}function _(r,t,e){var o;let n=(o=this.properties)==null?void 0:o[r];n||(n={attribute:e.attribute?t:!1,propertyKey:r,type:e.type,typeName:e.type.name},this.properties[r]=n,n.attribute&&this.attributeToPropertyMap.set(n.attribute,n.propertyKey))}var I={type:String,attribute:!0,rerender:!0,verbose:!1};function m(r){let t={...I,...r||{}};return function(e,n){let o=`_${n}`,i=(typeof t.attribute=="string"?t.attribute:n).toLowerCase(),s,a=e.constructor,l=a.observedAttributes||[];l.some(u=>u===i)||l.push(i),a.observedAttributes=l,Object.defineProperty(e,n,{set(u){s=u}});let c=e.connectedCallback;e.connectedCallback=function(){try{Object.defineProperty(this,n,{configurable:!1,get(){let u=this[o];return t!=null&&t.get?t.get.call(this,u):u},set(u){var L;t!=null&&t.set&&(u=t.set.call(this,u));let f=_.call(this,n,i,t),y=h(u,t.type);if(this.delayedAttributes&&this.delayedAttributes[i]&&this.delayedAttributes[i]===y||h(this[o],t.type)===y)return;t.attribute&&(this.delayedAttributes||(this.delayedAttributes={}),this.delayedAttributes[i]!==y&&(this.delayedAttributes[i]=y,this.updateAttribute())),t!=null&&t.before&&t.before.call(this,u);let k=this[o];this[o]=u,t.rerender&&((L=this.requestUpdate)==null||L.call(this)),t!=null&&t.after&&t.after.call(this,u,k),t.context&&this.dispatchEvent(new Event(`context-${n}`))}})}catch(u){}this[n]||(this[n]=s),c==null||c.call(this)}}}function P(r){let t={selector:""};return typeof r=="string"?t.selector=r:(t.selector=r.selector,t.load=r.load),function(e,n){let o=n+"rerender_attempts_",i=n+"timeout_attempts_",s=e.connectedCallback||function(){};e.connectedCallback=function(){s.call(this),a.call(this)};function a(){u.call(this)||l.call(this)}function l(){let f=this[o]||0;f++,!u.call(this)&&f<5&&(this[i]=0,this[o]=f,setTimeout(()=>c.call(this),100),this.callAfterRender&&this.callAfterRender.push(()=>l.call(this)))}function c(){let f=this[i]||0;f++,!u.call(this)&&f<3&&(this[i]=f,setTimeout(()=>c.call(this),100))}function u(){if(this[n])return!0;if(this.shadowRoot){let f=this.shadowRoot.querySelector(t.selector);if(f)return this[n]=f,typeof t=="object"&&t.load&&t.load.call(this,f),!0}return!1}}}function E(r,t=300){let e=null;return function(...n){e&&clearTimeout(e),e=setTimeout(()=>{r.apply(this,n),e=null},t)}}function it(){let r=new Date().getTime();return typeof performance!="undefined"&&typeof performance.now=="function"&&(r+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){let e=(r+Math.random()*16)%16|0;return r=Math.floor(r/16),(t==="x"?e:e&3|8).toString(16)})}function p(r){if(r.parentElement)return r.parentElement;let t=r.getRootNode();return t?t.host:null}function ot(r){let t=0,e=0;do t+=r.offsetTop||0,e+=r.offsetLeft||0,r=r.offsetParent;while(r);return{top:t,left:e}}function st(r){let t=r.assignedNodes(),e=[];return t.forEach(n=>w(n,e)),e}function w(r,t){if(r.hasChildNodes())r.childNodes.forEach(e=>w(e,t));else if(r.textContent){if(r.textContent.trim()==="")return;t.push(r.textContent)}}function at(r){return Math.abs(r)<1e3?r.toString():Math.abs(r)<1e6?Math.round(r*10/1e3)/10+"k":Math.abs(r)<1e9?Math.round(r*10/1e6)/10+"m":Math.abs(r)<1e12?Math.round(r*10/1e9)/10+"bn":Math.round(r*10/1e12)/10+"tn"}function lt(r){var i,s,a;if(r.classList.contains("mobile"))return"mobile";let t=window.getComputedStyle(r),e=Number((i=t.getPropertyValue("--breakpoint-desktop"))==null?void 0:i.replace("px",""))||320,n=Number((s=t.getPropertyValue("--breakpoint-laptop"))==null?void 0:s.replace("px",""))||768,o=Number((a=t.getPropertyValue("--breakpoint-pad"))==null?void 0:a.replace("px",""))||1024;return window.innerWidth>e?"desktop":window.innerWidth>n?"laptop":window.innerWidth>o?"pad":"mobile"}function O(r,t,e){return r+(t-r)*e}function ct(r,t,e,n,o){let i=(r-t)/(e-t);return Math.min(o,Math.max(O(n,o,i),n))}function C(r){let t=[];for(let e=0;e<r.childNodes.length;e++){let n=r.childNodes[e];n.nodeType===8?t.push(n):t.push.apply(t,C(n))}return t}function U(r,t,e,n){if(e===null)return;let o=n;for(let i=0;i<e.length;i++){let s=Number(e[i]);o=o[s]}try{r.insertBefore(o,t)}catch(i){console.error(i),console.log("what is going on here",r)}}function ft(r,...t){let e="";for(let i=0;i<t.length;i++){if(t[i]instanceof Array){let l=[];for(let c=0;c<t[i].length;c++)t[i][c]instanceof DocumentFragment&&l.push(`<!-- comment-node-${i}.${c} -->`);if(l.length>0){e+=r[i]+l.join(" ");continue}}if(t[i]instanceof DocumentFragment){e+=r[i]+`<!-- comment-node-${i} -->`;continue}let s=r[i].trim(),a=s.match(/.*\s(on|@)([\w-]*)=/);if(a){let[l,c,u]=a,f=s.split(c+u);e+=f[0]+` @${u}="${i}"`}else if(t[i]===void 0){let l=/\w+="$/;e+=r[i].replace(l,"")}else e+=r[i]+t[i]}e+=r[t.length];let n=document.createElement("template");n.innerHTML=e.trim();let o=n.content;return C(o).forEach(i=>{var a;let s=i.parentNode;if(s){let l=(a=i.nodeValue)==null?void 0:a.trim();if(l!=null&&l.startsWith("comment-node")&&i.textContent){let c=i.textContent.match(/\d+/g);U(s,i,c,t)}s.removeChild(i)}}),F(),o.querySelectorAll("*").forEach(i=>{Array.from(i.attributes).forEach(s=>{if(s.name.startsWith("@")){let a=s.name.slice(1),l=Number(i.getAttribute(s.name));i.removeAttribute(s.name),i.addEventListener(a,t[l])}}),i.removeAttribute('"')}),o}function q(r,t){if(!t.__eventListeners)for(let e in r.__eventListeners)for(let n of r.__eventListeners[e])t.addEventListener(e,n.listener,n.options)}function A(r,t){if(q(r,t),!(r instanceof HTMLSlotElement))for(let e=0;e<r.children.length;e++)A(r.children[e],t.children[e])}function F(){if(window.eventListenersBeenInitialized)return;window.eventListenersBeenInitialized=!0;let r=Element.prototype.addEventListener,t=Element.prototype.removeEventListener,e=Element.prototype.cloneNode;Element.prototype.addEventListener=function(n,o,i){this.__eventListeners=this.__eventListeners||{};let s={listener:o,options:i};this.__eventListeners[n]=this.__eventListeners[n]||[];let a=this.__eventListeners[n].findIndex(l=>l.listener===o&&JSON.stringify(l.options)===JSON.stringify(i));a!==-1&&(t.call(this,n,this.__eventListeners[n][a].listener,this.__eventListeners[n][a].options),this.__eventListeners[n].splice(a,1)),this.__eventListeners[n].push(s),r.call(this,n,o,i)},Element.prototype.removeEventListener=function(n,o,i){if(this.__eventListeners&&this.__eventListeners[n]){let s=this.__eventListeners[n].findIndex(a=>a.listener===o&&i===a.options);s!==-1&&this.__eventListeners[n].splice(s,1)}t.call(this,n,o,i)},Element.prototype.cloneNode=function(n){let o=e.call(this,n);return n&&A(this,o),o},Element.prototype.getEventListeners=function(){return this.__eventListeners}}function pt(r){return r===void 0?void 0:String(r)}function j(r){let t={rerender:!0,verbose:!1,...r||{}};return function(e,n){t.name||(t.name=n),t.attribute||(t.attribute=n);let o=e.connectedCallback;e.connectedCallback=function(){let i=this,s=t.name+"_subcontext";i[s]=!0,o&&o.call(i),t.verbose&&console.log("connected-callback",t);let a=p(i);for(;a&&(t.verbose&&console.log("finding parent",a),!(t.name in a&&!(s in a)||t.attribute&&a.hasAttribute(t.attribute)&&!(s in a)));){if(t.verbose&&console.log("did not find",t.name,"in",a),a===document.documentElement){a=null;break}a=p(a)}if(t.verbose&&console.log("final parent",a),a){let l=()=>{t.verbose&&console.log("context-update",t.name,t.attribute);let c=i[t.name];if(t.name in a?i[t.name]=a[t.name]:t.attribute&&a.hasAttribute(t.attribute)&&(i[t.name]=a.getAttribute(t.attribute)),t.applyattribute){if(i[t.name]===void 0)this.removeAttribute(t.attribute);else if(!(i[t.name]instanceof Object)){let u=h(i[t.name],String);this.setAttribute(t.attribute,u)}}t.update&&t.update.call(this,i[t.name],c),t.rerender&&i.requestUpdate()};l(),a.addEventListener(`context-${t.name}`,l),a.addEventListener("context-manual-change-banana",l)}else console.warn(`Context provider for '${t.name}' not found.`)}}}function v(r,t){switch(t.name){case"Boolean":return r===null?!1:r===""||r.toLowerCase()==="true";case"Number":return Number(r);case"Object":case"Array":return r===null?null:JSON.parse(r);default:return t(r)}}function M(r,t){if(!t.shadowRoot){console.error("shadowroot not defined yet!");return}let e=t.shadowRoot.querySelector("style[data-static-style]");if(e||(e=document.createElement("style"),e.setAttribute("data-static-style","true"),t.shadowRoot.appendChild(e)),!r.reactiveStyling&&t.stylecomperator)return;let n=t.getStyle();t.stylecomperator||(t.stylecomperator=document.createElement("style"),e.innerHTML=n),t.stylecomperator.innerHTML=n,t.stylecomperator.innerHTML!==e.innerHTML&&(e.innerHTML=t.stylecomperator.innerHTML)}function N(r,t){if(!t.shadowRoot){console.error("shadowroot not defined yet!");return}if(!t.render){console.error("render not defined yet");return}let e=t.render();if(!t.rendercomperator){t.rendercomperator=document.createElement("template"),x(t,e,t.shadowRoot),t.lastrender=t.domparser.parseFromString(t.outerHTML,"text/html");return}r.reactiveRendering?$(t,e):(V(t.shadowRoot),x(t,e,t.shadowRoot)),t.lastrender=t.domparser.parseFromString(t.outerHTML,"text/html")}function x(r,t,e){if(["string","number","boolean"].includes(typeof t)){let n=(t||"").toString();if(/</.test(n)&&/>/.test(n))e.innerHTML=e.innerHTML+n;else{let o=document.createTextNode(n);e.appendChild(o)}}else t instanceof DocumentFragment?e.appendChild(t):t instanceof Array&&t.forEach(n=>{x(r,n,e)})}function V(r){r.childNodes.forEach(t=>{t.nodeName==="STYLE"&&t.hasAttribute("data-static-style")||r.removeChild(t)})}function $(r,t){var n;if(!r.rendercomperator)return;let e=r.rendercomperator.querySelectorAll("*:not(style[data-static-style])");for(let o of e)(n=o.parentNode)==null||n.removeChild(o);for(;r.rendercomperator.firstChild;)r.rendercomperator.removeChild(r.rendercomperator.firstChild);r.rendercomperator.appendChild(r.stylecomperator),x(r,t,r.rendercomperator),W(r),B(r)}function B(r){r.shadowRoot&&r.rendercomperator&&r.shadowRoot.querySelectorAll("*:not(style[data-static-style])").forEach(t=>{if(!t.parentNode)return;let e=T(r.shadowRoot,t),n=e.join(" > ");if(!r.rendercomperator.querySelector(n)){let i=!0;r.lastrender&&(i=r.lastrender.querySelector(n)!==null),i&&!e.some(s=>/render-greedy/.test(s))&&t.parentNode.removeChild(t)}})}function W(r){if(!r.shadowRoot||!r.rendercomperator)return;let t=r.rendercomperator.cloneNode(!0);t.querySelectorAll("*:not(style[data-static-style])").forEach(e=>{let n=T(t,e),o=r.rendercomperator.querySelector(n.join(" > "));if(o){for(let s in o.__eventListeners)if(!e.__eventListeners[s]){let a=o.__eventListeners[s],{listener:l,options:c}=a[a.length-1];e.addEventListener(s,l,c)}}let i=r.querySelector(n.join(" > "));if(i){for(let s=0;s<e.attributes.length;s++){let a=e.attributes[s].name,l=e.attributes[s].value;i.getAttribute(a)!==l&&i.setAttribute(a,l)}e.childNodes.forEach((s,a)=>{var l;if(s.nodeType===Node.TEXT_NODE){if(((l=s.textContent)==null?void 0:l.trim())==="")return;let c=i.childNodes[a];c?c.nodeType===Node.TEXT_NODE?c.textContent!==s.textContent&&(c.textContent=s.textContent):(console.error("[ERROR] if this can be seen we must update (1)"),console.log({shadowTextNode:c,child:s,content:s.textContent})):i.childNodes.length===0?i.textContent=s.textContent:(console.error("[ERROR] if this can be seen we must update (2)"),console.log({child:s,content:s.textContent,shadowNode:i}))}})}else{let s=r.shadowRoot,a=e;if(n.length>1)for(let l=n.length-1;l>=0;l--){let c=r.querySelector(n.slice(0,l).join(" > "));if(c){s=c;break}else a=e.parentElement}if(a){let l=R(r,t,e);l?s==null||s.insertBefore(a,l):s==null||s.appendChild(a)}else console.error("[ERROR] this case should not happen"),console.log({shadowtarget:s,node:e,target:a,path:n})}})}function T(r,t){let e=[];for(;t!==r;){e.push(J(t));let n=t.parentElement;if(n)t=n;else break}return e.reverse()}function J(r){let t=[r.tagName];if(r.id?t.push("#"+r.id):r.hasAttribute("key")?t.push(`[key="${r.getAttribute("key")}"]`):r.hasAttribute("part")?t.push(`[part="${r.getAttribute("part")}"]`):typeof r.className=="string"&&r.className&&t.push("."+r.className.trim().replace(/ /g,".")),r.hasAttribute("render-greedy")&&t.push("[render-greedy]"),t.length===1&&r.parentNode&&r.parentNode.children.length>1){let e=0;for(let n=0;n<r.parentNode.children.length;n++)if(r.parentNode.children[n]===r){e=n;break}t.push(`:nth-child(${e+1})`)}return t.join("")}function R(r,t,e){if(e.nextElementSibling){let n=T(t,e.nextElementSibling),o=r.querySelector(n.join(" > "));return o||R(r,t,e.nextElementSibling)}return null}var S=class extends HTMLElement{constructor(e){var n;super();this.attributeinit=!1;this.delayedAttributes={};this.callAfterRender=[];this.attributeToPropertyMap=new Map;this.hasrendered=!1;this.properties={};this.hasFocus=!1;this.handleblur=()=>{this.hasFocus=!1};this.handlefocus=()=>{this.hasFocus=!0};this.setting={updateInterval:100,attributeUpdateInterval:10,reactiveRendering:!0,reactiveStyling:!1,noblur:!1,nofocus:!1,mode:"open",delegatesFocus:!1,noshadow:!1,...e||{}},this.setting.noshadow||this.attachShadow({...this.setting}),this.callAfterRender.push(this.firstRender),this.originalHTML=this.outerHTML,(n=window.crypto)!=null&&n.randomUUID?this.UUID=window.crypto.randomUUID():this.UUID=Math.random()+""+performance.now(),this.setting.noblur||this.addEventListener("blur",this.handleblur),this.setting.noblur||this.addEventListener("focus",this.handlefocus),this.requestUpdate=E(this.requestUpdate,this.setting.updateInterval),this.updateAttribute=E(this.updateAttribute,this.setting.attributeUpdateInterval)}get domparser(){return S._domparser}connectedCallback(){var e;this.attributeinit=!1,this.dispatchEvent(new Event("connected")),(e=this.requestUpdate)==null||e.call(this),this.setDOMpath(),this.setAttribute("UUID",this.UUID)}disconnectedCallback(){this.dispatchEvent(new Event("disconnected"))}attributeChangedCallback(e,n,o){let i=this.delayedAttributes[e];if(delete this.delayedAttributes[e],n!==o&&!i){let s=this.attributeToPropertyMap.get(e);if(s){let a=this.properties[s];a?this[a.propertyKey]=v(o,a.type):console.warn("[BASE]: not delayed not prop options",e)}}}firstRender(){var e;this.hasrendered=!0,(e=this.updateAttribute)==null||e.call(this)}__update(){if(!this.shadowRoot)return;M(this.setting,this),N(this.setting,this);let e,n=this.callAfterRender.reverse();for(;e=n.pop();)typeof e=="object"&&e.callback.call(this,...e.args),e instanceof Function&&e.call(this);this.callAfterRender=[]}render(e){return"Hello From Base Class"}querySelector(e){return e?this.shadowRoot?this.shadowRoot.querySelector(e):null:(console.log("empty string"),null)}originalQuerySelector(e){return e?super.querySelector(e):(console.log("empty string"),null)}getProperties(){return this.properties||{}}getStyle(){var o;let e=this.constructor;return[...(o=e.styles)!=null?o:[],...typeof e.style=="string"?[e.style]:[]].join(" ")}shadow_closest(e){let n=p(this);for(;n;){let o=n.closest(e);if(o)return o;let i=n.querySelector(e);if(i)return i;if(n===document.documentElement)break;n=p(n)}}requestUpdate(){this.__update()}setDOMpath(){let e=this,n=[];for(;e!==document.documentElement;){let o=p(e);if(!o){console.error("[warning] could not establish parent");break}if(o.DOMpath){n.push(o.DOMpath);break}let i=-1;if(o.children){for(let s=0;s<o.children.length;s++)if(o.children[s]===e){i=s;break}}else console.error("[error] parent has no children",o);n.push(`${e.tagName}:nth-child(${i+1})`),e=o}this.DOMpath=n.reverse().join(">")}initAttributes(){if(this.attributeinit)return;this.attributeinit=!0;let e=this.attributes;for(let n=0;n<e.length;n++){let o=e[n].name,i=this.attributeToPropertyMap.get(o);if(i&&this.properties[i]){let s=e[n].value;s===""&&(s="true"),this[this.properties[i].propertyKey]=v(s,this.properties[i].type)}}}updateAttribute(){if(this.hasrendered){this.initAttributes();for(let e in this.delayedAttributes){let n=this.delayedAttributes[e];n===void 0?this.removeAttribute(e):this.setAttribute(e,n)}}}},d=S;d._domparser=new DOMParser,d.observedAttributes=[],g([m({type:Boolean,rerender:!1})],d.prototype,"hasFocus",2);var b=class extends d{constructor(e){super(e);this._internals=this.attachInternals()}formDisabledCallback(e){this.disabled=e}formAssociatedCallback(e){console.log("[field]: formAssociatedCallback",e)}formStateRestoreCallback(e,n){console.log("[field]: formStateRestoreCallback",{state:e,mode:n})}checkValidity(){var e;return this._internals===void 0?!0:(e=this._internals)==null?void 0:e.checkValidity()}reportValidity(){var e;return this._internals===void 0?!0:(e=this._internals)==null?void 0:e.reportValidity()}setValidity(e,n,o){!this._internals!==void 0&&this._internals.setValidity(e,n,o||void 0)}};b.formAssociated=!0,g([m({type:Boolean,after:function(r){r?this.setAttribute("aria-disabled","true"):(this.setAttribute("aria-disabled","false"),this.removeAttribute("disabled"))}})],b.prototype,"disabled",2);export{h as ConvertToString,ot as CumulativeOffset,d as CustomElement,b as CustomElementInternals,lt as DetectDevice,st as ExtractSlotValue,at as FormatNumber,p as NextParent,q as ReapplyEvents,A as ReapplyEventsDeep,j as context,E as debounce,C as findComments,it as generateUUID,ft as html,pt as ifDefined,O as lerp,ct as lerpValue,m as property,P as query};
